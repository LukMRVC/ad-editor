<h2 mat-dialog-title>Image gallery</h2>

<mat-dialog-content style="padding: 1rem;" fxLayout="column" fxLayoutGap=".5rem">
  <div fxLayout="row wrap" fxLayoutAlign="start" fxLayoutGap=".5rem" class="gallery">
    <h1 *ngIf="imageService.getImages().length <= 0">The gallery seems to be empty.</h1>


    <mat-card *ngFor="let img of imageUploads | keyvalue" fxFlex="1 0 20" class="mat-gallery-img mat-elevation-z0">
      <mat-progress-bar mode="determinate" color="accent" [value]="img.value"></mat-progress-bar>
      <!-- TODO: Remove image source -->
      <img mat-card-image src="https://www.kvitkov.cz/wp-content/uploads/2020/10/image-placeholder.png" alt="Image placeholder">
    </mat-card>

    <mat-card *ngFor="let img of imageService.getImages()" fxFlex="1 0 20" class="mat-elevation-z0 mat-gallery-img">

      <img mat-card-image class="uploaded-image" [src]="img.src" [alt]="img.name">
      <mat-card-content>
        <h4>{{ img.name }}</h4>
      </mat-card-content>
      <mat-card-footer>

      </mat-card-footer>
      <mat-card-actions class="gallery-actions">
        <button [mat-dialog-close]="img" mat-raised-button color="primary">Select</button>
        <button mat-button (click)="imageService.removeImage(img.id)" color="accent">Remove</button>
      </mat-card-actions>

    </mat-card>

  </div>

  <button fxFlex="25" (click)="fileInput.click()" mat-raised-button color="accent">
    Upload images
    <mat-icon>insert_photo</mat-icon>
  </button>
  <input (change)="upload($event)" style="display: none;" #fileInput type="file" multiple accept="image/jpeg,image/png">
  <ngx-file-drop dropZoneLabel="Drop images here" (onFileDrop)="fileDropped($event)"></ngx-file-drop>


</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-dialog-close mat-raised-button>Close</button>
</mat-dialog-actions>
